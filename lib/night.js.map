{"version":3,"sources":["webpack://Night/webpack/universalModuleDefinition","webpack://Night/webpack/bootstrap","webpack://Night/./node_modules/suncalc2/suncalc2.js","webpack://Night/./src/defaults.ts","webpack://Night/./src/index.ts","webpack://Night/./src/night.ts"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;;AAEA,cAAc;;AAEd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;;AAEA,yBAAyB,6CAA6C;AACtE,yBAAyB,4CAA4C;AACrE,yBAAyB,+BAA+B;;;AAGxD;;AAEA,sBAAsB;;AAEtB,+BAA+B,wDAAwD;AACvF,+BAA+B,yDAAyD;;AAExF,gCAAgC,8DAA8D;AAC9F,gCAAgC,iEAAiE;;AAEjG,8BAA8B,8CAA8C;;AAE5E;AACA;AACA,cAAc;;AAEd;AACA;AACA;AACA;;AAEA;;AAEA,8BAA8B,0CAA0C;;AAExE;;AAEA;AACA,2BAA2B;;AAE3B;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;;AAEA,6BAA6B,2CAA2C;;AAExE,mCAAmC,sCAAsC;AACzE,mCAAmC,2DAA2D;;AAE9F,+BAA+B,iEAAiE;;AAEhG;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA,mCAAmC,SAAS;AAC5C;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA,wBAAwB;;AAExB;AACA;AACA;;AAEA;AACA;AACA,qCAAqC;;AAErC;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mBAAmB,SAAS;AAC5B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA,IAAI,IAA4D;AAChE,KAAK,EACyB;;AAE9B,CAAC;;;;;;;;;;;;;ACrTY;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClBa;AACb;AACA,4CAA4C;AAC5C;AACA,8CAA8C,cAAc;AAC5D,8BAA8B,mBAAO,CAAC,+BAAS;AAC/C;AACA;AACA;;;;;;;;;;;;;ACRa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D,iBAAiB,mBAAO,CAAC,qCAAY;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,4CAA4C,qBAAqB,mBAAO,CAAC,qDAAU,GAAG,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD","file":"night.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Night\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Night\"] = factory();\n\telse\n\t\troot[\"Night\"] = factory();\n})(typeof window !== \"object\" ? global.window = global : window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","/*\r\n (c) 2011-2015, Vladimir Agafonkin\r\n SunCalc is a JavaScript library for calculating sun/moon position and light phases.\r\n https://github.com/mourner/suncalc\r\n*/\r\n\r\n(function () { 'use strict';\r\n\r\n// shortcuts for easier to read formulas\r\n\r\nvar PI   = Math.PI,\r\n    sin  = Math.sin,\r\n    cos  = Math.cos,\r\n    tan  = Math.tan,\r\n    asin = Math.asin,\r\n    atan = Math.atan2,\r\n    acos = Math.acos,\r\n    rad  = PI / 180;\r\n\r\n// sun calculations are based on http://aa.quae.nl/en/reken/zonpositie.html formulas\r\n\r\n\r\n// date/time constants and conversions\r\n\r\nvar dayMs = 1000 * 60 * 60 * 24,\r\n    J1970 = 2440588,\r\n    J2000 = 2451545;\r\n\r\nfunction toJulian(date) { return date.valueOf() / dayMs - 0.5 + J1970; }\r\nfunction fromJulian(j)  { return new Date((j + 0.5 - J1970) * dayMs); }\r\nfunction toDays(date)   { return toJulian(date) - J2000; }\r\n\r\n\r\n// general calculations for position\r\n\r\nvar e = rad * 23.4397; // obliquity of the Earth\r\n\r\nfunction rightAscension(l, b) { return atan(sin(l) * cos(e) - tan(b) * sin(e), cos(l)); }\r\nfunction declination(l, b)    { return asin(sin(b) * cos(e) + cos(b) * sin(e) * sin(l)); }\r\n\r\nfunction azimuth(H, phi, dec)  { return atan(sin(H), cos(H) * sin(phi) - tan(dec) * cos(phi)); }\r\nfunction altitude(H, phi, dec) { return asin(sin(phi) * sin(dec) + cos(phi) * cos(dec) * cos(H)); }\r\n\r\nfunction siderealTime(d, lw) { return rad * (280.16 + 360.9856235 * d) - lw; }\r\n\r\nfunction astroRefraction(h) {\r\n    if (h < 0) // the following formula works for positive altitudes only.\r\n        h = 0; // if h = -0.08901179 a div/0 would occur.\r\n\r\n    // formula 16.4 of \"Astronomical Algorithms\" 2nd edition by Jean Meeus (Willmann-Bell, Richmond) 1998.\r\n    // 1.02 / tan(h + 10.26 / (h + 5.10)) h in degrees, result in arc minutes -> converted to rad:\r\n    return 0.0002967 / Math.tan(h + 0.00312536 / (h + 0.08901179));\r\n}\r\n\r\n// general sun calculations\r\n\r\nfunction solarMeanAnomaly(d) { return rad * (357.5291 + 0.98560028 * d); }\r\n\r\nfunction eclipticLongitude(M) {\r\n\r\n    var C = rad * (1.9148 * sin(M) + 0.02 * sin(2 * M) + 0.0003 * sin(3 * M)), // equation of center\r\n        P = rad * 102.9372; // perihelion of the Earth\r\n\r\n    return M + C + P + PI;\r\n}\r\n\r\nfunction sunCoords(d) {\r\n\r\n    var M = solarMeanAnomaly(d),\r\n        L = eclipticLongitude(M);\r\n\r\n    return {\r\n        dec: declination(L, 0),\r\n        ra: rightAscension(L, 0)\r\n    };\r\n}\r\n\r\n\r\nvar SunCalc = {};\r\n\r\n\r\n// calculates sun position for a given date and latitude/longitude\r\n\r\nSunCalc.getPosition = function (date, lat, lng) {\r\n\r\n    var lw  = rad * -lng,\r\n        phi = rad * lat,\r\n        d   = toDays(date),\r\n\r\n        c  = sunCoords(d),\r\n        H  = siderealTime(d, lw) - c.ra;\r\n\r\n    return {\r\n        azimuth: azimuth(H, phi, c.dec),\r\n        altitude: altitude(H, phi, c.dec)\r\n    };\r\n};\r\n\r\n\r\n// sun times configuration (angle, morning name, evening name)\r\n\r\nvar times = SunCalc.times = [\r\n    [-0.833, 'sunrise',       'sunset'      ],\r\n    [  -0.3, 'sunriseEnd',    'sunsetStart' ],\r\n    [    -6, 'dawn',          'dusk'        ],\r\n    [   -12, 'nauticalDawn',  'nauticalDusk'],\r\n    [   -18, 'nightEnd',      'night'       ],\r\n    [     6, 'goldenHourEnd', 'goldenHour'  ]\r\n];\r\n\r\n// adds a custom time to the times config\r\n\r\nSunCalc.addTime = function (angle, riseName, setName) {\r\n    times.push([angle, riseName, setName]);\r\n};\r\n\r\n\r\n// calculations for sun times\r\n\r\nvar J0 = 0.0009;\r\n\r\nfunction julianCycle(d, lw) { return Math.round(d - J0 - lw / (2 * PI)); }\r\n\r\nfunction approxTransit(Ht, lw, n) { return J0 + (Ht + lw) / (2 * PI) + n; }\r\nfunction solarTransitJ(ds, M, L)  { return J2000 + ds + 0.0053 * sin(M) - 0.0069 * sin(2 * L); }\r\n\r\nfunction hourAngle(h, phi, d) { return acos((sin(h) - sin(phi) * sin(d)) / (cos(phi) * cos(d))); }\r\n\r\n// returns set time for the given sun altitude\r\nfunction getSetJ(h, lw, phi, dec, n, M, L) {\r\n\r\n    var w = hourAngle(h, phi, dec),\r\n        a = approxTransit(w, lw, n);\r\n    return solarTransitJ(a, M, L);\r\n}\r\n\r\n\r\n// calculates sun times for a given date and latitude/longitude\r\n\r\nSunCalc.getTimes = function (date, lat, lng) {\r\n\r\n    var lw = rad * -lng,\r\n        phi = rad * lat,\r\n\r\n        d = toDays(date),\r\n        n = julianCycle(d, lw),\r\n        ds = approxTransit(0, lw, n),\r\n\r\n        M = solarMeanAnomaly(ds),\r\n        L = eclipticLongitude(M),\r\n        dec = declination(L, 0),\r\n\r\n        Jnoon = solarTransitJ(ds, M, L),\r\n\r\n        i, len, time, Jset, Jrise;\r\n\r\n\r\n    var result = {\r\n        solarNoon: fromJulian(Jnoon),\r\n        nadir: fromJulian(Jnoon + 0.5)\r\n    };\r\n\r\n    for (i = 0, len = times.length; i < len; i += 1) {\r\n        time = times[i];\r\n\r\n        Jset = getSetJ(time[0] * rad, lw, phi, dec, n, M, L);\r\n        Jrise = Jnoon - (Jset - Jnoon);\r\n\r\n        result[time[1]] = fromJulian(Jrise);\r\n        result[time[2]] = fromJulian(Jset);\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\n\r\n// moon calculations, based on http://aa.quae.nl/en/reken/hemelpositie.html formulas\r\n\r\nfunction moonCoords(d) { // geocentric ecliptic coordinates of the moon\r\n\r\n    var L = rad * (218.316 + 13.176396 * d), // ecliptic longitude\r\n        M = rad * (134.963 + 13.064993 * d), // mean anomaly\r\n        F = rad * (93.272 + 13.229350 * d),  // mean distance\r\n\r\n        l  = L + rad * 6.289 * sin(M), // longitude\r\n        b  = rad * 5.128 * sin(F),     // latitude\r\n        dt = 385001 - 20905 * cos(M);  // distance to the moon in km\r\n\r\n    return {\r\n        ra: rightAscension(l, b),\r\n        dec: declination(l, b),\r\n        dist: dt\r\n    };\r\n}\r\n\r\nSunCalc.getMoonPosition = function (date, lat, lng) {\r\n\r\n    var lw  = rad * -lng,\r\n        phi = rad * lat,\r\n        d   = toDays(date),\r\n\r\n        c = moonCoords(d),\r\n        H = siderealTime(d, lw) - c.ra,\r\n        h = altitude(H, phi, c.dec),\r\n        // formula 14.1 of \"Astronomical Algorithms\" 2nd edition by Jean Meeus (Willmann-Bell, Richmond) 1998.\r\n        pa = atan(sin(H), tan(phi) * cos(c.dec) - sin(c.dec) * cos(H));\r\n\r\n    h = h + astroRefraction(h); // altitude correction for refraction\r\n\r\n    return {\r\n        azimuth: azimuth(H, phi, c.dec),\r\n        altitude: h,\r\n        distance: c.dist,\r\n        parallacticAngle: pa\r\n    };\r\n};\r\n\r\n\r\n// calculations for illumination parameters of the moon,\r\n// based on http://idlastro.gsfc.nasa.gov/ftp/pro/astro/mphase.pro formulas and\r\n// Chapter 48 of \"Astronomical Algorithms\" 2nd edition by Jean Meeus (Willmann-Bell, Richmond) 1998.\r\n\r\nSunCalc.getMoonIllumination = function (date) {\r\n\r\n    var d = toDays(date || new Date()),\r\n        s = sunCoords(d),\r\n        m = moonCoords(d),\r\n\r\n        sdist = 149598000, // distance from Earth to Sun in km\r\n\r\n        phi = acos(sin(s.dec) * sin(m.dec) + cos(s.dec) * cos(m.dec) * cos(s.ra - m.ra)),\r\n        inc = atan(sdist * sin(phi), m.dist - sdist * cos(phi)),\r\n        angle = atan(cos(s.dec) * sin(s.ra - m.ra), sin(s.dec) * cos(m.dec) -\r\n                cos(s.dec) * sin(m.dec) * cos(s.ra - m.ra));\r\n\r\n    return {\r\n        fraction: (1 + cos(inc)) / 2,\r\n        phase: 0.5 + 0.5 * inc * (angle < 0 ? -1 : 1) / Math.PI,\r\n        angle: angle\r\n    };\r\n};\r\n\r\n\r\nfunction hoursLater(date, h) {\r\n    return new Date(date.valueOf() + h * dayMs / 24);\r\n}\r\n\r\n// calculations for moon rise/set times are based on http://www.stargazing.net/kepler/moonrise.html article\r\n\r\nSunCalc.getMoonTimes = function (date, lat, lng, inUTC) {\r\n    var t = new Date(date);\r\n    if (inUTC) t.setUTCHours(0, 0, 0, 0);\r\n    else t.setHours(0, 0, 0, 0);\r\n\r\n    var hc = 0.133 * rad,\r\n        h0 = SunCalc.getMoonPosition(t, lat, lng).altitude - hc,\r\n        h1, h2, rise, set, a, b, xe, ye, d, roots, x1, x2, dx;\r\n\r\n    // go in 2-hour chunks, each time seeing if a 3-point quadratic curve crosses zero (which means rise or set)\r\n    for (var i = 1; i <= 24; i += 2) {\r\n        h1 = SunCalc.getMoonPosition(hoursLater(t, i), lat, lng).altitude - hc;\r\n        h2 = SunCalc.getMoonPosition(hoursLater(t, i + 1), lat, lng).altitude - hc;\r\n\r\n        a = (h0 + h2) / 2 - h1;\r\n        b = (h2 - h0) / 2;\r\n        xe = -b / (2 * a);\r\n        ye = (a * xe + b) * xe + h1;\r\n        d = b * b - 4 * a * h1;\r\n        roots = 0;\r\n\r\n        if (d >= 0) {\r\n            dx = Math.sqrt(d) / (Math.abs(a) * 2);\r\n            x1 = xe - dx;\r\n            x2 = xe + dx;\r\n            if (Math.abs(x1) <= 1) roots++;\r\n            if (Math.abs(x2) <= 1) roots++;\r\n            if (x1 < -1) x1 = x2;\r\n        }\r\n\r\n        if (roots === 1) {\r\n            if (h0 < 0) rise = i + x1;\r\n            else set = i + x1;\r\n\r\n        } else if (roots === 2) {\r\n            rise = i + (ye < 0 ? x2 : x1);\r\n            set = i + (ye < 0 ? x1 : x2);\r\n        }\r\n\r\n        if (rise && set) break;\r\n\r\n        h0 = h2;\r\n    }\r\n\r\n    var result = {};\r\n\r\n    if (rise) result.rise = hoursLater(t, rise);\r\n    if (set) result.set = hoursLater(t, set);\r\n\r\n    if (!rise && !set) result[ye > 0 ? 'alwaysUp' : 'alwaysDown'] = true;\r\n\r\n    return result;\r\n};\r\n\r\n\r\n// export as Node module / AMD module / browser variable\r\nif (typeof exports === 'object' && typeof module !== 'undefined') module.exports = SunCalc;\r\nelse if (typeof define === 'function' && define.amd) define(SunCalc);\r\nelse window.SunCalc = SunCalc;\r\n\r\n}());\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultSettings = {\n    auto: true,\n    brightness: false,\n    brightnessHighClass: 'high-brightness',\n    brightnessLowClass: 'low-brightness',\n    checkBreakpoint: true,\n    darkClass: 'dark',\n    lightClass: '',\n    mode: 'smart',\n    permissionDelay: 0,\n    soundTimeout: 1000,\n    soundUrl: '',\n    storage: true,\n    storageClear: true,\n    sunriseTime: null,\n    sunsetTime: null\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar night_1 = __importDefault(require(\"./night\"));\nexports.default = night_1.default;\nexports['default'] = night_1.default;\nmodule.exports = exports['default'];\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar defaults_1 = require(\"./defaults\");\nvar Night = /** @class */ (function () {\n    function Night(data) {\n        var _this = this;\n        this.isPlaying = false;\n        this.autoCoords = true;\n        this.autoTimes = true;\n        this.today = new Date();\n        this.isNight = function () {\n            var now = new Date();\n            return (now.getTime() > _this.times.sunrise && now.getTime() < _this.times.sunset);\n        };\n        this.changeClasses = function (method, change) {\n            if (_this.elements instanceof HTMLCollection) {\n                Object.values(_this.elements).map(function (element) {\n                    element.classList[method](change);\n                });\n            }\n            else if (_this.elements instanceof HTMLElement) {\n                _this.elements.classList[method](change);\n            }\n        };\n        this.accessSuccess = function (_a) {\n            var coords = _a.coords;\n            _this.coords = {\n                latitude: coords.latitude,\n                longitude: coords.longitude\n            };\n            if (typeof _this.callbacks.onAccess === 'function') {\n                _this.callbacks.onAccess();\n            }\n            if (_this.settings.storage) {\n                localStorage.setItem('location', JSON.stringify(_this.coords));\n            }\n        };\n        this.accessError = function (error) {\n            if (typeof _this.callbacks.onAccessDenied === 'function') {\n                _this.callbacks.onAccessDenied();\n            }\n            document.dispatchEvent(new CustomEvent('smartDarkError', {\n                detail: error\n            }));\n        };\n        this.elements = data.elements || document.body;\n        this.settings = this.extendSettings(data.settings || {});\n        this.callbacks = data.callbacks || {};\n        this.isInit = this.settings.auto;\n        this.init();\n    }\n    Night.prototype.init = function () {\n        if (this.settings.mode === 'color-scheme') {\n            this.prefersColorScheme();\n            this.isInit = false;\n        }\n        else if (this.settings.mode === 'smart') {\n            this.time(new Date());\n            this.smartSwitch(this.isInit);\n        }\n        this.switchOnChange();\n        if (typeof this.callbacks.onInit == 'function') {\n            this.callbacks.onInit();\n        }\n        if (this.settings.brightness) {\n            this.ambientLight();\n        }\n    };\n    Night.prototype.ambientLight = function () {\n        var _this = this;\n        if ('ondevicelight' in window) {\n            window.addEventListener('devicelight', function (e) {\n                if (e.value < 50) {\n                    _this.changeClasses('add', _this.settings.brightnessLowClass);\n                    _this.changeClasses('remove', _this.settings.brightnessHighClass);\n                }\n                else {\n                    _this.changeClasses('add', _this.settings.brightnessHighClass);\n                    _this.changeClasses('remove', _this.settings.brightnessLowClass);\n                }\n            });\n            if (typeof this.callbacks.onBrightness === 'function') {\n                this.callbacks.onBrightness();\n            }\n        }\n        else {\n            if (typeof this.callbacks.onBrightnessNotSupported === 'function') {\n                this.callbacks.onBrightnessNotSupported();\n                if (this.isNight()) {\n                    this.changeClasses('add', this.settings.brightnessLowClass);\n                    this.changeClasses('remove', this.settings.brightnessHighClass);\n                }\n                else {\n                    this.changeClasses('add', this.settings.brightnessHighClass);\n                    this.changeClasses('remove', this.settings.brightnessLowClass);\n                }\n            }\n        }\n    };\n    Night.prototype.sound = function () {\n        var _this = this;\n        if (!this.isPlaying) {\n            var audio_1 = new Audio(this.settings.soundUrl);\n            this.isPlaying = true;\n            audio_1.play();\n            if (typeof this.callbacks.onSoundPlay === 'function') {\n                this.callbacks.onSoundPlay();\n            }\n            setTimeout(function () {\n                audio_1.pause();\n                audio_1.currentTime = 0;\n                _this.isPlaying = false;\n                if (typeof _this.callbacks.onSoundPause === 'function') {\n                    _this.callbacks.onSoundPause();\n                }\n            }, this.settings.soundTimeout);\n        }\n    };\n    Night.prototype.light = function () {\n        if (typeof this.callbacks.onLight === 'function') {\n            this.callbacks.onLight();\n        }\n        this.isDark = false;\n        if (this.settings.lightClass) {\n            this.changeClasses('add', this.settings.lightClass);\n        }\n        this.changeClasses('remove', this.settings.darkClass);\n        localStorage.setItem('dark', 'false');\n    };\n    Night.prototype.dark = function () {\n        if (typeof this.callbacks.onDark === 'function') {\n            this.callbacks.onDark();\n        }\n        this.isDark = true;\n        if (this.settings.lightClass) {\n            this.changeClasses('remove', this.settings.lightClass);\n        }\n        this.changeClasses('add', this.settings.darkClass);\n        localStorage.setItem('dark', 'true');\n    };\n    Night.prototype.prefersColorScheme = function () {\n        this.matchDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n        this.matchLight = window.matchMedia('(prefers-color-scheme: light)').matches;\n        if (this.matchDark || this.matchLight) {\n            if (this.matchDark) {\n                this.dark();\n            }\n            else if (this.matchLight) {\n                this.light();\n            }\n            if (this.isInit && typeof this.callbacks.onColorScheme === 'function') {\n                this.callbacks.onColorScheme();\n            }\n        }\n        else {\n            if (this.isInit &&\n                typeof this.callbacks.onColorSchemeNotSupported === 'function') {\n                this.callbacks.onColorSchemeNotSupported();\n            }\n        }\n    };\n    Night.prototype.smartSwitch = function (isInit) {\n        if ((isInit && !localStorage.auto) || !isInit) {\n            localStorage.setItem('auto', 'true');\n            if (typeof this.callbacks.onSmartSwitch === 'function') {\n                this.callbacks.onSmartSwitch();\n            }\n        }\n        if (this.settings.sunriseTime && this.settings.sunsetTime) {\n            this.timeBreakpoints();\n        }\n        else {\n            if ('geolocation' in navigator && this.isInit) {\n                this.myLocation();\n            }\n        }\n        if (isInit) {\n            this.isInit = false;\n        }\n        this.theme(this.isDark);\n    };\n    Night.prototype.time = function (now) {\n        var midnight = new Date().setHours(24, 0, 0, 0);\n        if (!localStorage.time) {\n            localStorage.setItem('time', JSON.stringify(midnight));\n        }\n        else if (localStorage.location &&\n            now.getTime() > JSON.parse(localStorage.time)) {\n            localStorage.removeItem('time');\n            if (this.settings.storageClear) {\n                localStorage.removeItem('location');\n                if (typeof this.callbacks.onStorageClear === 'function') {\n                    this.callbacks.onStorageClear();\n                }\n            }\n        }\n    };\n    Night.prototype.theme = function (isDark) {\n        if (isDark !== this.isDark) {\n            isDark ? this.dark() : this.light();\n        }\n    };\n    Night.prototype.switchOnChange = function () {\n        var _a = this.times, sunrise = _a.sunrise, sunset = _a.sunset;\n        var _b = this.coords, latitude = _b.latitude, longitude = _b.longitude;\n        var times = {};\n        if (localStorage.auto && JSON.parse(localStorage.auto)) {\n            if (JSON.stringify(times) !== JSON.stringify(this.times)) {\n                if (this.isNight()) {\n                    this.light();\n                }\n                else {\n                    this.dark();\n                }\n                times = this.times;\n            }\n        }\n        document.dispatchEvent(new CustomEvent('smartDark', {\n            detail: {\n                sunrise: new Date(sunrise),\n                sunset: new Date(sunset),\n                latitude: latitude,\n                longitude: longitude\n            }\n        }));\n    };\n    Night.prototype.myLocation = function () {\n        var _this = this;\n        if (localStorage.location || !this.autoCoords) {\n            if (this.autoCoords) {\n                this.coords = JSON.parse(localStorage.location);\n            }\n            if (this.autoTimes) {\n                this.sunPosition();\n            }\n        }\n        else {\n            setTimeout(function () {\n                navigator.geolocation.getCurrentPosition(_this.accessSuccess, _this.accessError);\n            }, this.settings.permissionDelay);\n        }\n    };\n    Night.prototype.sunPosition = function () {\n        var _this = this;\n        var _a = this.coords, latitude = _a.latitude, longitude = _a.longitude;\n        Promise.resolve().then(function () { return __importStar(require('suncalc2')); }).then(function (SunCalc) {\n            var times = SunCalc.getTimes(_this.today, latitude, longitude);\n            var sunrise;\n            var sunset;\n            if (_this.settings.sunriseTime) {\n                sunrise = _this.settings.sunriseTime.getTime();\n            }\n            else {\n                sunrise = times.sunriseEnd - (times.sunriseEnd - times.sunrise) / 2;\n            }\n            if (_this.settings.sunsetTime) {\n                sunset = _this.settings.sunsetTime.getTime();\n            }\n            else {\n                sunset = times.sunset - (times.sunset - times.sunsetStart) / 2;\n            }\n            _this.times = { sunrise: sunrise, sunset: sunset };\n        });\n    };\n    Night.prototype.timeBreakpoints = function () {\n        this.times = {\n            sunrise: this.settings.sunriseTime.getTime(),\n            sunset: this.settings.sunsetTime.getTime()\n        };\n    };\n    Night.prototype.setCoords = function (latitude, longitude) {\n        this.coords = { latitude: latitude, longitude: longitude };\n        this.autoCoords = false;\n    };\n    Night.prototype.setTimes = function (sunrise, sunset) {\n        this.times = { sunrise: sunrise, sunset: sunset };\n        this.autoTimes = false;\n    };\n    Night.prototype.toggle = function () {\n        if (typeof this.callbacks.onToggle === 'function') {\n            this.callbacks.onToggle();\n        }\n        if (this.settings.soundUrl)\n            this.sound();\n        this.theme(!this.isDark);\n        localStorage.setItem('auto', 'false');\n    };\n    Night.prototype.reset = function () {\n        localStorage.clear();\n        if (typeof this.callbacks.onReset === 'function') {\n            this.callbacks.onReset();\n        }\n    };\n    Night.prototype.destroy = function () {\n        if (typeof this.callbacks.onDestroy === 'function') {\n            this.callbacks.onDestroy();\n        }\n    };\n    Night.prototype.extendSettings = function (settings) {\n        var newSettings = {};\n        var property;\n        for (property in defaults_1.defaultSettings) {\n            if (property in settings) {\n                newSettings[property] = settings[property];\n            }\n            else {\n                newSettings[property] = defaults_1.defaultSettings[property];\n            }\n        }\n        return newSettings;\n    };\n    return Night;\n}());\nexports.default = Night;\n"],"sourceRoot":""}